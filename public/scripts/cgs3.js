$(function(){function t(){o=setInterval(function(){e()},800)}function e(){$("#switchBox").click(),clearInterval(o)}var o,a=io.connect("http://www.koheishingai.com:8082");$(".window_label").click(function(){0==monitor?($("#switchBox").click(),a.emit("publishit",$("#editor_area").text(),location.hash),location.reload()):(a.emit("publishit",$("#editor_area").text(),location.hash),location.reload())}),$("#full-page-link").click(function(){var t={};if(0==oneflg&&0==elem){var e=function(t,e){e=e||"";var o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"+e;o=o.split("");for(var i="",a=0;t>a;a++)i+=o[Math.floor(Math.random()*o.length)];return i},o=e(7);if(a.emit("publishit",$("#editor_area").text(),o),t=localStorage.getItem("history"),null==t)t={0:"http://www.koheishingai.com/codegarage#"+o},localStorage.setItem("history",JSON.stringify(t));else{var n=0;for(i in JSON.parse(t))n++;t=JSON.parse(t),t[n]="http://www.koheishingai.com/codegarage#"+o,localStorage.setItem("history",JSON.stringify(t))}$("#full-page-url").attr("value","http://www.koheishingai.com/codegarage#"+o),oneflg++}else 1==elem&&a.emit("publishit",$("#editor_area").text(),location.hash)}),a.emit("cgsin",location.hash),a.on("done",function(){1==elem?$("#done").text("Save it.").fadeIn():$("#done").text("Publish it.").fadeIn()}),a.on("cdgout",function(e){null!=e?($("#textBox").append(e),$(".window_label ").show(),elem=1):($("#textBox").append('<h1 style="text-align:center; margin-top:20px;">CodeGarage</h1>'),location.hash="",elem=0),t()})});